{% extends 'base.html' %}
{% block content %}

<h1>agent</h1>

{% if user.is_authenticated %}


<table class="table table-striped table-hover table-bordered table-sm">
  <thead class="table-dark">
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Name</th>
      <th scope="col">Phone</th>
      <th scope="col">Email</th>
      <th scope="col">City</th>
      <th scope="col">Assigned_town</th>
      <th scope="col">State</th>
      <th scope="col">Created_at</th>
    </tr>
  </thead>
  </tbody>


     {% if agents %} 
       {% for agent in agents %}
         <tr>
           <td><a href="{% url  'agent_detail' agent.id %}">{{ agent.id }}</a></td>
           <td><a href="{% url  'agent_detail' agent.id %}">{{ agent.first_name }}{{ agent.last_name }}</td>
           <td>{{ agent.phone }}</td>
           <td>{{ agent.email }}</td>
           <td>{{ agent.city }}</td>
           <td>{{ agent.assigned_town }}</td>
           <td>{{ agent.state }}</td>
           <td>{{ agent.created_at }}</td>
           <td>
              <a href="{% url  'agent_detail' agent.id %}" class="btn btn-primary btn-sm">Edit</a>
              <a href="{% url  'agent_delete' agent.id %}" class="btn btn-primary btn-sm">Delete</a>
           </td>
         </tr>
       {% endfor %}
     {% else %}
       <tr>
         <td colspn="9">No agents found.</td>
       </tr>
     {% endif %}
   </tbody>
</table>
    

<a href="{% url 'add_agent' %}" class="btn btn-primary">Add agent</a>

{% else %}
  <p>Please <a href="{% url 'login' %}">login</a>to view agent.</p>
{% endif %}


{% endblock %}